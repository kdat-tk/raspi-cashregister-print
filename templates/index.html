<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kassensystem</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

</head>
<body>
    <div id="app">
        <!-- Kopfzeile mit Benutzerwahl und Logout -->
        <div id="header">
            <div id="user-selection">
                {% for user in users %}
                    <button class="user-btn" data-user="{{ user.name }}" data-nfc-id="{{ user.nfc_id }}">
                        <span class="user-icon">ðŸ‘¤</span> {{ user.name }}
                    </button>
                {% endfor %}
            </div>
            <!-- SVG Power-Off Icon fÃ¼r Logout -->
            <button id="logoutBtn" class="logout-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2" />
                    <line x1="12" y1="5" x2="12" y2="12" stroke="white" stroke-width="2" />
                </svg>
            </button>
        </div>


        <!-- Displaybereich links und rechts -->
        <div id="main-display">
            <!-- Linke Seite: Warenkorb -->
            <div id="cart-section">
                <h2>Warenkorb</h2>
                <div id="total" class="highlighted-total">Gesamtbetrag: <span id="total_price">0.00</span> â‚¬</div>
                <div id="cart-items"></div> <!-- Log-Bereich fÃ¼r gekaufte Produkte -->
                <button id="resetBtn" class="reset-btn">Reset</button>
            </div>


            <!-- Rechte Seite: Produkte und Eingabe -->
            <div id="product-section">
                <h2>Produkte</h2>
                <div id="products">
                    {% for product in products %}
                        <button class="product-btn {{ 'negative' if product.price < 0 }}" data-name="{{ product.name }}" data-price="{{ product.price }}">
                            <div class="product-name">{{ product.name }}</div>
                            <div class="product-price">{{ "%.2f"|format(product.price) }} â‚¬</div>
                        </button>
                    {% endfor %}
                </div>

                <!-- Button fÃ¼r letzten Artikel lÃ¶schen -->
                <button id="removeLastBtn" class="remove-last-btn">Letzter Artikel lÃ¶schen</button>

                <!-- Trennlinie -->
                <hr>

                <!-- Eingabebereich fÃ¼r Betrag -->
                <div id="payment-section">
                    <h2>Bezahlung</h2>
                    <div>
                        <label for="given_amount">Erhaltener Betrag:</label>
                        <input type="number" id="given_amount" placeholder="0.00" />
                        <button id="clearAmountBtn" class="clear-amount-btn">âœ•</button>
                    </div>

                    <!-- Geldschein-Buttons -->
                    <div id="notes">
                        <button class="note-btn" data-amount="1">1 â‚¬</button>
                        <button class="note-btn" data-amount="2">2 â‚¬</button>
                        <button class="note-btn" data-amount="5">5 â‚¬</button>
                        <button class="note-btn" data-amount="10">10 â‚¬</button>
                        <button class="note-btn" data-amount="20">20 â‚¬</button>
                        <button class="note-btn" data-amount="50">50 â‚¬</button>
                        <button class="note-btn" data-amount="100">100 â‚¬</button>
                        <button class="note-btn" data-amount="200">200 â‚¬</button>
                    </div>

                    <button id="checkoutBtn">Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup-Overlay fÃ¼r RÃ¼ckgeld -->
    <div id="change-popup" class="popup-overlay">
        <div class="popup-content">
            <h2>RÃ¼ckgeld</h2>
            <p><span id="change-amount"></span> â‚¬</p>
            <button id="close-popup">SchlieÃŸen</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
